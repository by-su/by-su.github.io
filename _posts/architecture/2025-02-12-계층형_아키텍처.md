---
title: 계층형 아키텍처란의 개념과 단점
excerpt: 계층형 아키텍처의 구조와 주요 단점에 대해 설명합니다.
permalink: /계층형-아키텍처
categories: [architecture]
tags: [아키텍처, 소프트웨어설계, 클린아키텍처. 계층형아키텍처]
image:
  path: /assets/covers/architecture.webp
toc: true
---




# 계층형 아키텍처
<img width="277" alt="Screenshot 2025-02-12 at 21 51 54" src="https://github.com/user-attachments/assets/78d4d9c1-9e95-4ae2-8907-890718f9090a" />

1. 웹 계층에서 클라이언트 요청을 받아 도메인 계층의 서비스로 전달한다.
2. 도메인 계층은 현재 상태를 조회하거나 변경하기 위해 영속성 계층을 이용한다.


잘 설계된 계층형 아키텍처는 코드의 응집도를 높이고, 변화하는 요구사항과 외부 환경에 유연하게 대응할 수 있도록 도와준다. 하지만 단점도 존재한다.

## 계층형 아키텍처 단점
계층형 아키텍처의 핵심 규칙은 **같은 계층의 컴포넌트 또는 아래 계층에만 접근 가능하다**는 것이다. 그러나 이 외의 규칙이 강제되지 않기 때문에 개발 과정에서 여러 가지 문제가 발생할 수 있다.

### 1. 웹 계층에서 영속성 계층을 직접 참조하는 문제
서비스 레이어를 거치지 않고 웹 계층에서 직접 영속성 계층을 호출하는 경우가 많아진다. 예를 들어, 단순한 조회 기능을 위해 다음과 같은 코드가 작성될 수 있다.
```java
public class UserController {

    private final UserRepository userRepository;

    ...

    // 모든 유저 조회
    @GetMapping
    public User findUser(@PathVariable Long id) {
        return userRepository.findById(id);
    }
}
```
이러한 접근 방식은 다음과 같은 문제를 야기한다.

1. 도메인 로직이 웹 계층에 침투: 사용자 이름의 가운데 글자를 가려야 한다면, 이 로직이 컨트롤러에 포함될 가능성이 커진다.이는 도메인 로직이 특정 계층에 종속되는 결과를 초래한다.
2. 테스트 복잡도 증가: 웹 계층의 테스트에서 영속성 계층을 모킹해야 하므로, 테스트가 복잡해진다.

### 2. 데이터베이스 중심 설계로 인한 결합 문제 
<img width="908" alt="Screenshot 2025-02-12 at 21 51 59" src="https://github.com/user-attachments/assets/ca04c6bf-4b60-4f14-813f-25ab572f9390" />


전통적인 계층형 아키텍처에서는 웹 → 도메인 → 영속성 순서로 요청이 흐르기 때문에 자연스럽게 데이터베이스 중심 설계가 이루어진다.
- JPA Entity 기반으로 도메인 로직을 구현한다. 이는 도메인 로직이 영속성 관련 개념(즉시 로딩, 지연 로딩, 트랜잭션 등)에 영향을 받게 만든다. 
- 결과적으로 도메인 모델과 영속성 코드가 강하게 결합되어 특정 기능을 변경할 때 데이터베이스 스키마도 함께 변경해야 하는 경우가 많아진다. 

### 3. 서비스의 역할이 비대해짐
계층형 아키텍처는 서비스의 '너비'에 대한 명확한 규칙을 강제하지 않기 때문에, 하나의 서비스가 너무 많은 유스케이스를 담당하는 문제가 발생한다.
<img width="902" alt="Screenshot 2025-02-12 at 21 52 06" src="https://github.com/user-attachments/assets/4ca722f3-2298-44c7-94ae-017d3463cf89" />


이처럼 지나치게 넓은 서비스는 변경이 어려워지고, 단일 책임 원칙(SRP)을 위반하게 된다.



### 4. 동시 작업이 어려움 
계층형 아키텍처에서는 보통 영속성 계층 → 도메인 계층 → 웹 계층 순서로 개발이 진행된다. 이로 인해 병렬 개발이 어려워지고, 특정 기능은 한 명의 개발자만 작업할 수 있는 상황이 발생한다.




